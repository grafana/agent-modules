// logs_from_api performs Kubernetes service discovery for pods, applies
// relabelings, and collects logs.
declare "logs_from_api" {
	argument "forward_to" {
		// comment = "Must be a list(LogsReceiver) where collected logs should be forwarded to"
		optional = false
	}

	discovery.kubernetes "pods" {
		role = "pod"
	}

	util.relabelings "default" {
		targets = discovery.kubernetes.pods.targets
		tenant  = argument.tenant.value
	}

	loki.source.kubernetes "pods" {
		targets    = util.relabelings.default.relabelings.output
		forward_to = argument.forward_to.value
	}
}
